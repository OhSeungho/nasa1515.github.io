---
layout: post
title: "[Kubernetes] - 쿠버네티스의 개념, PODS"
author: Lee Wonseok
categories: Kubernetes
date: 2020-08-17 09:36
comments: true
cover: "/assets/kubernets.jpg"
tags: Kubernetes
---



#  KUBERNETES - 쿠버네티스의 개념 정리, PODS    

**머리말**  
이전 포스트에서 드디어 GCP 인스턴스 기반의 k8s 클러스터 환경을 구축했다.  
이번 포스트에서는 이번에 간단하게 포스트해서 정리했지만  
실제 실습을 들어가기전 전체적인 개념에 대해서 다시 한번 정리하고  
쿠버네티스의 PODS에 대해서 포스트한다.


---

**참고  :**  [조대협님 블로그](https://bcho.tistory.com/1256)
 
---

**목차**

- [개념 정리](#a1)
- [구성 (Install)](#a2)



---

## 개념정리   <a name="a1"></a>


* ### **오브젝트**  
    **쿠버네티스를 이해하기 위해 가장 중요한 부분이 ``오브젝트``이다.**  
    **가장 ``기본적인 구성단위``가 되는 ``기본 오브젝트(Basic object)``**  
    **``기본 오브젝트(Basic object)`` 를 ``생성``하고 ``관리``하는 추가적인 기능을 가진 ``컨트롤러(Controller)``**  
    **이러한 오브젝트의 ``스펙(설정)``이외에 추가정보인 ``메타 정보``들로 구성이 된다고 보면 된다.** 

* ### **``오브젝트 스펙 (Object Spec)``**   
    **오브젝트들은 모두 오브젝트의 특성 (설정정보)을 기술한 오브젝트 스펙 (Object Spec)으로 정의가 되고,  
    커맨드 라인을 통해서 오브젝트 생성 시 인자로 전달하여 정의를 하거나  
    또는 ``yaml``이나 ``json`` 파일로 ``스펙을 정의``할 수 있다.** 

* ### **``기본 오브젝트 (Basic Object)``**  
    **쿠버네티스에 의해서 배포 및 관리되는 가장 기본적인 오브젝트는  
    컨테이너화되어 배포되는 애플리케이션의 워크로드를 기술하는 오브젝트로 4가지가 있다.**   
    
    * **Pod : 컨테이너화된 애플리케이션**
    * **Service : 로드밸런서**
    * **Volume : 디스크**
    * **Namespace : 패키지**

---


* ### **``Pod``**  
    **Pod 는 쿠버네티스에서 ``가장 기본적인 배포 단위``로, 컨테이너를 포함하는 단위이다.**

    **k8s의 특징중의 하나는 컨테이너를 하나씩 배포하는 것이 아니라  
    Pod 라는 단위로 배포하는데, Pod는 하나 이상의 컨테이너를 포함한다.**



    * **간단한 Pod를 정의한 오브젝트 스펙이다**

        ```
        apiVersion: v1
        kind: Pod
        metadata:
        name: nginx
        spec:
        containers:
        - name: nginx
            image: nginx:1.7.9
            ports:
            - containerPort: 8090
        ```


    * **``apiVersion`` :  이 스크립트를 실행하기 위한 쿠버네티스 API 버전 (보통 v1을 사용한다)**

    * **``kind`` : 리소스의 종류를 정의, (Pod)**

    * **``metadata`` : 리소스의 각종 메타 데이타 정의**  
    **``라벨``이나 ``리소스의 이름`` 등 각종 메타데이타를 넣는다.**  

    * **``spec`` : 리소스에 대한 ``상세한 스펙``을 정의한다.**
        * **Pod는 컨테이너를 가지고 있기 때문에, container 를 정의**  
        * **이름은 ``nginx``** 
        * **``도커 이미지 nginx:1.7.9`` 를 사용**  
        * **``컨테이너 포트 8090을 오픈``한다.**

---

**도대체 왜 Pod 안에 한개 이상의 컨테이너를 가지고 있음에도**  
**개별적으로 하나씩 컨테이너를 배포하지 않고**  
**여러개의 컨테이너를 Pod 단위로 묶어서 배포할까?**



* ### **Pod는 다음과 두가지 특징을 가지고 있기 때문이다.**  

    * **``Pod 내의 컨테이너는 IP와 Port를 공유한다.``**   
    
        ``두 개의 컨테이너``가 ``하나의 Pod를 통해서 배포``되었을때  
        localhost를 통해서 통신이 가능하다.  
        
        컨테이너 ``A가 8080``, 컨테이너 ``B가 7001``로 배포가 되었을 때  
        ``B -> A``를 호출 할 때 ``localhost:8080 으로 호출``하면 되고  
        ``A -> B``를 호출 할 때는 ``localhost:7001로 호출``이 가능하다. 

    * **``Pod 내에 배포된 컨테이너간에는 디스크 볼륨을 공유할 수 있다.``**   
    
        **요즘 APP은 실행할때 APP만 올라가는것이 아니라  
        ``Reverse proxy``, ``로그 수집기``등 다양한 주변 솔루션이 같이 배포 된다.**    
    
        **``APP(Tomcat, node.js)``와 로그 수집기를 다른 컨테이너로 배포할 경우  
        일반적인 경우 컨테이너에 의해서 ``파일 시스템이 분리``되기 때문에  
        로그 수집기가 APP 컨테이너의 로그파일을 읽는 것이 불가능 하다.**

        **하지만 쿠버네티스의 경우  
        하나의 Pod 내에서는 컨테이너들끼리 볼륨을 공유할 수 있기 때문에  
        다른 컨테이너의 파일을 읽어올 수 있다.**

