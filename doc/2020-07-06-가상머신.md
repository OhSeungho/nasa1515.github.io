---
title:  "Virtual"
excerpt: "Virtual"

categories:

  - CCCR
  
tags:

  - CCCR
 
last_modified_at: 2020-07-06T09:00:00-05:00

---


# Virtual 정리.


**PART 3 - Virtual**  

* 목차  
1. Virtual box 

  
----


  * **교육 관련 참고 사이트**
 1. https://blog.solaris.co.kr/277?category=144952


## Virtual Box?

간단 설명  
  : 기본적으로 공개되어있는 가상머신 중 VMWARE와 Virtual Box를 가장 많이 이용한다.
이번 포스트에서는 두 가상머신의 차이점(네트워크 부분) 에 대해서 설명 할 것이다.



**네트워크 관리**



### 따로 페이지 정리.
- vmware
  1) bridge (wmnet 0) - host os의 직접적인 nic에 연결되어 망분리도 가능 
  2) host only (vmnet 1) - host os <-> guest os 의 통신을 위한 nic
  3) NAT (vmnet 8) - host only 같이 가상의 sw가 추가로 만들어지고
  vmnat 프로세스를 통해서 host 물리의 nic 카드에 직접 접속.
  vmnet 8의 경우 guest 와 host only 와의 통신을 위해 존재
  vmnet8의 연결이 끊겨도 guest 와 host의 인터넷은 가능.


- virtualbox
 1) NAT 네트워크와 NAT의 차이.


-	 NAT = 가상OS 1개당 1개의 NAT를 생성해주지만 가상 머신끼리의 통신은 물리적인 연결을 추가로 해주지 않는 이상 불가.

	- NAT Network = vmware 의 NAT 구동 방식 처럼 하나의 NAT로 같은 대역의 IP를 할당받는다. ( 여러개의 NAT를 구성할 수 있다.)

   

-----


**2. vmware 15.x pro 설치 network 구성**



|                |ASCII                          |HTML                         |
|----------------|-------------------------------|-----------------------------|
|Single backticks|`'Isn't this fun?'`            |'Isn't this fun?'            |
|Quotes          |`"Isn't this fun?"`            |"Isn't this fun?"            |
|Dashes          |`-- is en-dash, --- is em-dash`|-- is en-dash, --- is em-dash|





----

7월 7일 정리

**로그 관리**

: 기존의 SYSLOG에서는 운영 로그, 설치 로그, 보안 로그 등을 (바이너리,텍스트) **파일**의 형태로 남겼다.
  현재의 RSYSLOG는 systemd-journal이 추가되어 원시적 로그 파일도 남기면서
  시스템 동작 로그들을 메모리에 Journal 로그(**바이너리**)로 생성한다.
	 
- 로그 파일의 위치
	1. /run/log/journal : 커널, syslog, 운영 메세지가 journal에게 전달되어 저장하는 위치
	2. /var/log/ : rsyslogd가 각 syslog에 해당하는 로그파일을 생성 (ex: /var/log/secure....)

	* **/var 역할**
		1. 로그 저장
		2. SPOOL 

	* **/run**
		메모리 기반의 파일 시스템인 Tmpfs로 마운트 되어 재부팅 되면 파일 삭제됨
		
* **logroate**
	: 리눅스를 운용하다 보면 로그를 보고 서버의 상태 혹은 장애를 대비합니다
	 대부분의 모든 로그를 남기도록 설정하면 로그 파일의 양은 시간이 지나며 엄청난 크기로 커져.
	 엄청난 크기로 커지기 전에 로그들을 관리하도록 설정하는 기능이 logrotate 입니다

	* **logroate 실행 순서**
	![](https://t1.daumcdn.net/cfile/tistory/99FEF73E5C986CD310)
	*	**config 파일 설명**

			see "man logrotate" for details
			rotate log files weekly
			weekly               ---[로그파일 순환 기간 설정 (daily, weekly....)
 
			# keep 4 weeks worth of backlogs
			rotate 4             ---[순환된 로그파일 보관 기간, 순환기간]

			# create new (empty) log files after rotating old ones
			create               ---[순환 후 새 로그파일 생성 여부]
	
			# use date as a suffix of the rotated file
			dateext            ---[순환된 파일의 파일명 변경 옵션]

			# uncomment this if you want your log files compressed
			#compress          ---[파일의 압축 옵션]

			# RPM packages drop log rotation information into this directory
			include /etc/logrotate.d   ---[로그 순환에 대한 추가 설정 파일]

			# no packages own wtmp and btmp -- we'll rotate them here
			/var/log/wtmp {
			    monthly
			    create 0664 root utmp
				minsize 1M
			    rotate 1
			}                       ---[사용자의 로그인/로그아웃 정보를 저장하는 wtmp 로그 설정]

			/var/log/btmp {
			    missingok
			    monthly
			    create 0600 root utmp
			    rotate 1
			}                       ---[로그인 실패 기록을 저장하는 btmp 로그 설정]

			# system-specific logs may be also be configured here.


----




/var/log/wtmp , utmp, btmp 


스페셜 디바이스 
1. /dev/zero
2. /dev/null

**RSYSLOGD**

**JOURNALCTL**


$ 실습 (rsyslog 수정)
 rsyslog 를 수정(추가)해서 인증에 대한 로그가 crit 이상으로 발생될때에 /var/log/securetest 파일에 남도록 설정하고, /var/log/sercuretest 에서 "Hello" 메세지를 확인하시오

$ vim /etc/rsyslog.conf
auth,authpriv.crit							/var/log/sercuretest

$ systemctl restart rsyslog.service
$ logger -p auth,authpriv.crt "Hello"
$ cat /var/log/securetset

----


**10강** - 2020-07-07 오후


## 패키지 관리

**1. RPM / dpkg**

-   RPM(RPM Package Manager←Red Hat Package Manager) : 레드햇 계열의 패키지 관리자
-   dpkg : 데비안 계열의 패키지 관리자


	**install, update**

		 참고 : rpm finder(http://rpmfind.net/linux/rpm2html/search.php?query=rpm)

	**install**

		 참고 : curl / wget 도구 차이




yum repolist


yum-config-maneger 사용법

-------

**네트워크**
기존의 NETWORK.service로 수동 스크립트를 수정하는 버전이 아니라  
7버전에서는 NetworkManager를 사용해 systemctl로 관리한다.




nmcli con mod enp0s3 ipv4.addresses 10.0.2.20/24
nmcli con reload 
nmcli con up enp0s3
nmcli con show enp0s3

nmcli con show enp0s3 | grep -i method 옵션이 설정되어있으면
ip를 mod 하더라도 기존의 ip도 떠 있게야 되어 수정 해줘야함.

nm의 메소드란 ? : 레거시버전의 bootstrap (static) 이라고 생각.

nmcli connection modify enp0s3 ipv4.method manual
reload
up
show


con-name
ifname 



포트포워딩


%% 과제 

개인 repo 서버 구성 후 (local) 

문서 만들어서 정리.

